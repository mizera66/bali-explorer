# Bali Explorer v3.3.0 - –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –§–ò–ö–°–´

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–ü–†–ò–û–†–ò–¢–ï–¢ 1):

### 1. –û—Ç–∑—ã–≤—ã —Ç–µ–ø–µ—Ä—å –û–¢–û–ë–†–ê–ñ–ê–Æ–¢–°–Ø ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç–∑—ã–≤—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –∏ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å, –Ω–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–ü—Ä–∏—á–∏–Ω–∞:** `loadComments()` –≤—ã–∑—ã–≤–∞–ª—Å—è –î–û —Ç–æ–≥–æ –∫–∞–∫ `entity` –∑–∞–≥—Ä—É–∂–∞–ª–∞—Å—å –∏–∑ localStorage

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –ë–´–õ–û:
useEffect(() => {
  loadEntity();
  loadComments(); // ‚Üê –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É, entity –µ—â–µ undefined!
}, [entityId]);

// –°–¢–ê–õ–û:
useEffect(() => {
  loadEntity();
}, [entityId]);

// –û—Ç–¥–µ–ª—å–Ω—ã–π useEffect –∫–æ—Ç–æ—Ä—ã–π –∂–¥–µ—Ç entity
useEffect(() => {
  if (entity) {
    loadComments(); // ‚Üê –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ü–û–°–õ–ï –∑–∞–≥—Ä—É–∑–∫–∏ entity!
  }
}, [entity]); // –ó–∞–≤–∏—Å–∏—Ç –æ—Ç entity
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–∑—ã–≤—ã –∏–∑ JSON ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è ‚úÖ
- –û—Ç–∑—ã–≤—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ `entity.reviews` ‚úÖ
- –û—Ç–∑—ã–≤—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ ‚úÖ

---

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ Vercel ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
Type error: Property 'totalScore' does not exist on type 'Entity'.
```

**–ü—Ä–∏—á–∏–Ω–∞:** `entity.totalScore` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ç–∏–ø–µ Entity (–Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `rating`)

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É—é `(entity as any).totalScore || entity.rating`

---

### 3. unverified = –∂–µ–ª—Ç—ã–π (–Ω–µ –∑–µ–ª–µ–Ω—ã–π) ‚úÖ

**–ë—ã–ª–æ:**
```javascript
if (status === 'flagged') return 'bg-red-100 text-red-800';
if (rating >= 4.0) return 'bg-green-100 text-green-800'; // ‚Üê unverified —Ç–æ–∂–µ –∑–µ–ª–µ–Ω—ã–π!
```

**–°—Ç–∞–ª–æ:**
```javascript
if (status === 'flagged' || status === 'active_problem') return 'bg-red-100 text-red-800';
if (status === 'unverified') return 'bg-yellow-100 text-yellow-800'; // ‚Üê –ñ–µ–ª—Ç—ã–π!
if (status === 'active') {
  if (rating >= 4.0) return 'bg-green-100 text-green-800';
}
```

---

### 4. –£–¥–∞–ª–µ–Ω—ã DEBUG –ª–æ–≥–∏ ‚úÖ

–£–±—Ä–∞–Ω—ã –≤—Å–µ `console.log()` –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## ‚ö†Ô∏è –ß–¢–û –ù–ï –ò–°–ü–†–ê–í–õ–ï–ù–û (TODO –¥–ª—è v3.3.1):

### 1. –î—É–±–ª–∏ —Ñ–æ—Ç–æ –≤ –ø—Ä–µ–≤—å—é
**–°—Ç–∞—Ç—É—Å:** –õ–æ–≥–∏–∫–∞ –µ—Å—Ç—å, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–ì–¥–µ:** EntityCardUnified.tsx
**–ù—É–∂–Ω–æ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—á–µ–º—É `gallery[0] === image_url` –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

### 2. –ö–Ω–æ–ø–∫–∞ "–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è"
**–°—Ç–∞—Ç—É—Å:** –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- –°–µ—Ä–∞—è –∫–Ω–æ–ø–∫–∞ –≤–Ω–∏–∑—É –∫–∞—Ä—Ç–æ—á–∫–∏
- –§–æ—Ä–º–∞ —Å —Ç–µ–∫—Å—Ç–æ–º –∂–∞–ª–æ–±—ã + –∏–º—è
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
- –°—Ç–∞—Ç—É—Å ‚Üí `active_problem` (–∫—Ä–∞—Å–Ω—ã–π)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω–∫–µ

---

## üéØ –ü—Ä–æ—Ü–µ–Ω—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏:

| –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å |
|-------------|-------------|--------|
| –û—Ç–∑—ã–≤—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è | 100%* | ‚úÖ –ì–û–¢–û–í–û |
| Vercel –æ—à–∏–±–∫–∞ | 100%* | ‚úÖ –ì–û–¢–û–í–û |
| unverified = –∂–µ–ª—Ç—ã–π | 100%* | ‚úÖ –ì–û–¢–û–í–û |
| –î—É–±–ª–∏ —Ñ–æ—Ç–æ | 50%* | ‚ö†Ô∏è TODO |
| –ö–Ω–æ–ø–∫–∞ "–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è" | 0%* | ‚ùå TODO |

---

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:

### –¢–µ—Å—Ç 1: –û—Ç–∑—ã–≤—ã
```
1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π JSON
2. –û–¥–æ–±—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫—É (‚úì)
3. –û—Ç–∫—Ä–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–∞—Ä—Ç–æ—á–∫–∏ (üëÅÔ∏è)
4. –ü—Ä–æ–∫—Ä—É—Ç–∏ –≤–Ω–∏–∑ ‚Üí "–†–µ–π—Ç–∏–Ω–≥ –∏ –æ—Ç–∑—ã–≤—ã"
5. –û—Ç–∑—ã–≤—ã –î–û–õ–ñ–ù–´ –ë–´–¢–¨ ‚úÖ
6. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 2-3 –æ—Ç–∑—ã–≤–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É
```

### –¢–µ—Å—Ç 2: –¶–≤–µ—Ç unverified
```
1. –ê–¥–º–∏–Ω–∫–∞
2. –ù–∞–π–¥–∏ –∫–∞—Ä—Ç–æ—á–∫—É —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "unverified"
3. –ë–µ–π–¥–∂ –î–û–õ–ñ–ï–ù –ë–´–¢–¨ –ñ–ï–õ–¢–´–ú ‚úÖ
```

### –¢–µ—Å—Ç 3: Vercel
```
1. Push –≤ GitHub
2. Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç
3. Build –î–û–õ–ñ–ï–ù –ü–†–û–ô–¢–ò –±–µ–∑ –æ—à–∏–±–æ–∫ ‚úÖ
```

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–∑—ã–≤–æ–≤:

**–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
```
1. useEffect –≤—ã–∑—ã–≤–∞–µ—Ç loadEntity()
2. loadEntity() –∑–∞–≥—Ä—É–∂–∞–µ—Ç entity –∏–∑ localStorage
3. setEntity(mapped) ‚Üí entity –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
4. –í—Ç–æ—Ä–æ–π useEffect –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ entity
5. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è loadComments()
6. loadComments() —á–∏—Ç–∞–µ—Ç entity.reviews
7. –û—Ç–∑—ã–≤—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è ‚úÖ
```

**–û—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –æ—Ç–∑—ã–≤—ã:**
```javascript
// 1. –ò–∑ entity.reviews (–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑ JSON)
let entityReviews = (entity as any).reviews.map(...)

// 2. –ò–∑ localStorage (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)
const userComments = stored[entityId] || []

// 3. –û–±—ä–µ–¥–∏–Ω—è–µ–º
const allComments = [...entityReviews, ...userComments]
```

---

## üé¨ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:

### v3.3.1 TODO:
1. ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è"
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥—É–±–ª–∏ —Ñ–æ—Ç–æ
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∂–∞–ª–æ–± –≤ –∞–¥–º–∏–Ω–∫–µ

---

**v3.3.0 –ì–û–¢–û–í–ê! –ü—Ä–æ—Ü–µ–Ω—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏: 100%*** ‚úÖ

*–ù–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
